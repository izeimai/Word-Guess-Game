<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Word Guess Game</title>
    <!-- Bootstrap link -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
</head>

<body>
    <div id="game">

        <!-- Aesthetic pieces in the browser (put back in for last step)
        <h1>Welcome to the Game!</h1>
        <h2>Guess the word</h2>
        -->
        <h2>Number of Guesses remaining: <span id="guessLeft">10</span></h2>
        <h2>Letters already guessed: <span id="guessedLetters"></span></h2>

    </div>

    <!-- Make sure you move this to a javascript file separately (after confirming that it works)
    and use src atribute of the script tag to link to that game.js file-->
    <script type="text/javascript">

        // Array of word options to randomly choose from
        var options = ["apple", "banana", "car"];
        // All the possible valid key presses (alphabet)
        var alphabet = "abcdefghijklmnopqrstuvwxyz";

        // Counters
        var numRemain = 10;
        var numCorrect = 0;
        var displayGuessLeft = document.getElementById("guessLeft");
        var displayGuessedLetters = document.getElementById("guessedLetters");
        var guessed = [];

        // Randomly chooses an answer from the options array
        var answer = options[Math.floor(Math.random() * options.length)];


        // Make a empty array and replaces it with underscores for each character of the answer
        var display = [];
        for (var i = 0; i < answer.length; i++) {
            display.push(" _");
        }
        // displays without commas separating each item
        document.write(display.join(""));

        //while ((numRemain > 0) || (numCorrect < answer.length)) {

            // This function is run whenever the user presses a key
            document.onkeyup = function (event) {

                // Determines which key was pressed
                var guess = event.key;

                if (alphabet.indexOf(guess) == -1) {
                    alert("Pressed a key that is not a letter of the alphabet");
                } else if (guessed.indexOf(guess) > -1) {
                    alert("Already guessed this letter");
                } else if (answer.indexOf(guess) > -1) { // matches
                    for (var i = 0; i < answer.length; i++) {
                        if (answer[i] === guess) {
                            display[i] = answer[i];
                            document.write(display.join(""));
                            numCorrect++;
                        }
                    }
                } else { // not a match
                    guessed.push(guess);
                    numRemain--;
                }
                
                console.log(numCorrect);
                console.log(numRemain);
                displayGuessLeft.textContent = numRemain;
                displayGuessedLetters.textContent = guessed;

            }; // close event

        //} //close while

    </script>

</body>

</html>